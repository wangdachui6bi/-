(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f8776b6"],{"2a5e":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"h",(function(){return f}));n("1313");var i=n("b775"),s=function(){return Object(i["a"])("/banner")},o=function(t){return Object(i["a"])({method:"get",url:"/personalized?limit=".concat(t)})},a=function(){return Object(i["a"])("/recommend/resource")},r=function(t){return Object(i["a"])({method:"get",url:"/playlist/detail?id=".concat(t)})},c=function(t){return Object(i["a"])({method:"get",url:"/likelist?id=".concat(t)})},l=function(t,e){return Object(i["a"])({method:"get",url:"/like?id=".concat(t,"&like=").concat(e)})},u=function(t,e,n){return Object(i["a"])({method:"get",url:"/comment/hot?id=".concat(t,"&type=").concat(e,"&limit=").concat(n)})},d=function(t){var e=t.id,n=t.limit,s=void 0===n?20:n,o=t.page,a=void 0===o?0:o,r=t.before,c=void 0===r?0:r,l=a*s;return Object(i["a"])({method:"get",url:"/comment/playlist?id=".concat(e,"&limit=").concat(s,"&offset=").concat(l,"&before=").concat(c)})},f=function(t){var e=t.id,n=t.limit,s=void 0===n?30:n,o=t.page,a=void 0===o?0:o,r=a*s;return Object(i["a"])({method:"get",url:"/playlist/subscribers?id=".concat(e,"&limit=").concat(s,"&offset=").concat(r)})}},4085:function(t,e,n){},"87e1":function(t,e,n){"use strict";n("4085")},f711:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"HistoryPlay view-main mtop-20"},[n("div",{staticClass:"info"},[n("div",[n("span",{staticClass:"font-24 font-bold"},[t._v("最近播放")]),n("span",{staticClass:"font-14 mleft-10"},[t._v("共 "+t._s(t.count)+" 首")])]),t._m(0)]),n("div",{staticClass:"btn-wrap mtop-10"},[n("button",{staticClass:"btn btn-red",on:{click:t.playHistorySong}},[n("i",{staticClass:"iconfont icon-bofang"}),t._v(" 播放全部 ")])]),n("div",{staticClass:"div-line mtop-20"}),n("el-skeleton",{attrs:{rows:6,animated:"",loading:t.loading}},[t.loading?t._e():[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hislistSongMsg,stripe:""},on:{"row-click":t.getOneSong}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{prop:"favicon",width:"30"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{on:{click:function(n){return t.likeMusic(e.row)}}},[n("div",[e.row.isLiked?n("i",{staticClass:"iconfont icon-aixin1",staticStyle:{color:"red"}}):n("i",{staticClass:"iconfont icon-aixin"})])])]}}],null,!1,3112678245)}),n("el-table-column",{attrs:{prop:"songName",label:"音乐标题",width:"211"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.songName))]),1===e.row.fee?n("div",{staticClass:"vip-tag"},[t._v("VIP")]):t._e(),0!==e.row.mv?n("div",{staticClass:"vip-tag",on:{click:function(n){return t.$router.push("/videodetail/mv/"+e.row.mv)}}},[t._v(" MV ")]):t._e()]}}],null,!1,1602777203)}),n("el-table-column",{attrs:{prop:"singer",label:"歌手",width:"80"}})],1)]],2)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-wrap"},[n("button",{staticClass:"no-btn"},[t._v("清除列表")])])}],o=n("f9ea"),a=(n("e186"),n("1baf"),n("e456"),n("af46"),n("2a5e")),r={name:"HistoryPlay",data:function(){return{count:0,tableData:[],hislistSongMsg:[],isListenId:-1,likeIdList:[],loading:!0}},methods:{getOneSong:function(t){if(this.isListenId!==t.id){this.$store.commit("songDetail/songAllMsg",t),this.isListenId=t.id;var e={};e.songName=t.name,e.singer=t.ar[0].name,e.id=t.id,e.picUrl=t.al.picUrl,this.songMsg=e,this.$store.dispatch("songDetail/getoneMusic",e)}else this.$store.state.songDetail.isPlay||this.$store.commit("songDetail/playback")},changHistoryList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.hislistSongMsg=[],n=JSON.parse(localStorage.historyplayList||"[]"),t.count=n.length,e.next=6,t.getLikeIdList(t.uid);case 6:n.forEach((function(e){var n={};n.songName=e.name,n.mv=e.mv,n.fee=e.fee,n.singer=e.ar[0].name,n.id=e.id,n.picUrl=e.al.picUrl,n.isLiked=t.isLiked(e.id),t.hislistSongMsg.push(n)})),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},playHistorySong:function(){0!==this.hislistSongMsg.length&&(this.$store.commit("songDetail/setSongList",this.hislistSongMsg),this.$store.dispatch("songDetail/getoneMusic",this.hislistSongMsg[0]))},getLikeIdList:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(a["c"])(t);case 2:i=n.sent,e.likeIdList=i.data.ids;case 4:case"end":return n.stop()}}),n)})))()},isLiked:function(t){return-1!==this.likeIdList.indexOf(t)},likeMusic:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLiked=!t.isLiked,e.next=3,Object(a["i"])(t.id,t.isLiked);case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.changHistoryList()},computed:{uid:function(){return this.$store.state.login.profile.userId}}},c=r,l=(n("87e1"),n("cba8")),u=Object(l["a"])(c,i,s,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5f8776b6.6cc214ef.js.map