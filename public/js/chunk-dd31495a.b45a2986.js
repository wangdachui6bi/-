(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd31495a"],{"2a5e":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"e",(function(){return o})),i.d(e,"g",(function(){return a})),i.d(e,"f",(function(){return r})),i.d(e,"c",(function(){return c})),i.d(e,"i",(function(){return l})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"h",(function(){return f}));i("cd5c");var n=i("b775"),s=function(){return Object(n["a"])("/banner")},o=function(t){return Object(n["a"])({method:"get",url:"/personalized?limit=".concat(t)})},a=function(){return Object(n["a"])("/recommend/resource")},r=function(t){return Object(n["a"])({method:"get",url:"/playlist/detail?id=".concat(t)})},c=function(t){return Object(n["a"])({method:"get",url:"/likelist?id=".concat(t)})},l=function(t,e){return Object(n["a"])({method:"get",url:"/like?id=".concat(t,"&like=").concat(e)})},u=function(t,e,i){return Object(n["a"])({method:"get",url:"/comment/hot?id=".concat(t,"&type=").concat(e,"&limit=").concat(i)})},d=function(t){var e=t.id,i=t.limit,s=void 0===i?20:i,o=t.page,a=void 0===o?0:o,r=t.before,c=void 0===r?0:r,l=a*s;return Object(n["a"])({method:"get",url:"/comment/playlist?id=".concat(e,"&limit=").concat(s,"&offset=").concat(l,"&before=").concat(c)})},f=function(t){var e=t.id,i=t.limit,s=void 0===i?30:i,o=t.page,a=void 0===o?0:o,r=a*s;return Object(n["a"])({method:"get",url:"/playlist/subscribers?id=".concat(e,"&limit=").concat(s,"&offset=").concat(r)})}},4085:function(t,e,i){},"87e15":function(t,e,i){"use strict";i("4085")},f711:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"HistoryPlay view-main mtop-20"},[i("div",{staticClass:"info"},[i("div",[i("span",{staticClass:"font-24 font-bold"},[t._v("最近播放")]),i("span",{staticClass:"font-14 mleft-10"},[t._v("共 "+t._s(t.count)+" 首")])]),t._m(0)]),i("div",{staticClass:"btn-wrap mtop-10"},[i("button",{staticClass:"btn btn-red",on:{click:t.playHistorySong}},[i("i",{staticClass:"iconfont icon-bofang"}),t._v(" 播放全部 ")])]),i("div",{staticClass:"div-line mtop-20"}),i("el-skeleton",{attrs:{rows:6,animated:"",loading:t.loading}},[t.loading?t._e():[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hislistSongMsg,stripe:""}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),i("el-table-column",{attrs:{prop:"favicon",width:"30"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{on:{click:function(i){return t.likeMusic(e.row)}}},[i("div",[e.row.isLiked?i("i",{staticClass:"iconfont icon-aixin1",staticStyle:{color:"red"}}):i("i",{staticClass:"iconfont icon-aixin"})])])]}}],null,!1,3112678245)}),i("el-table-column",{attrs:{prop:"songName",label:"音乐标题",width:"211"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.songName))]),1===e.row.fee?i("div",{staticClass:"vip-tag"},[t._v("VIP")]):t._e(),0!==e.row.mv?i("div",{staticClass:"vip-tag",on:{click:function(i){return t.$router.push("/videodetail/mv/"+e.row.mv)}}},[t._v(" MV ")]):t._e()]}}],null,!1,1602777203)}),i("el-table-column",{attrs:{prop:"singer",label:"歌手",width:"80"}})],1)]],2)],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"no-btn"},[t._v("清除列表")])])}],o=i("799e"),a=(i("e186"),i("fd72"),i("87c5"),i("11e1"),i("2a5e")),r={name:"HistoryPlay",data:function(){return{count:0,tableData:[],hislistSongMsg:[],isListenId:-1,likeIdList:[],loading:!0}},methods:{getOneSong:function(t){if(this.isListenId!==t.id){this.$store.commit("songDetail/songAllMsg",t),this.isListenId=t.id;var e={};e.songName=t.name,e.singer=t.ar[0].name,e.id=t.id,e.picUrl=t.al.picUrl,this.songMsg=e,this.$store.dispatch("songDetail/getoneMusic",e)}else this.$store.state.songDetail.isPlay||this.$store.commit("songDetail/playback")},changHistoryList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.hislistSongMsg=[],i=JSON.parse(localStorage.historyplayList||"[]"),t.count=i.length,e.next=6,t.getLikeIdList(t.uid);case 6:i.forEach((function(e){var i={};i.songName=e.name,i.mv=e.mv,i.fee=e.fee,i.singer=e.ar[0].name,i.id=e.id,i.picUrl=e.al.picUrl,i.isLiked=t.isLiked(e.id),t.hislistSongMsg.push(i)})),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},playHistorySong:function(){0!==this.hislistSongMsg.length&&(this.$store.commit("songDetail/setSongList",this.hislistSongMsg),this.$store.dispatch("songDetail/getoneMusic",this.hislistSongMsg[0]))},getLikeIdList:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(a["c"])(t);case 2:n=i.sent,e.likeIdList=n.data.ids;case 4:case"end":return i.stop()}}),i)})))()},isLiked:function(t){return-1!==this.likeIdList.indexOf(t)},likeMusic:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLiked=!t.isLiked,e.next=3,Object(a["i"])(t.id,t.isLiked);case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.changHistoryList()},computed:{uid:function(){return this.$store.state.login.profile.userId}}},c=r,l=(i("87e15"),i("cba8")),u=Object(l["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-dd31495a.b45a2986.js.map