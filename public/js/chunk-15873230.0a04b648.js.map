{"version":3,"sources":["webpack:///./src/api/DiscoverMusic/PersonalRecom.js","webpack:///./src/views/Search/index.vue?553e","webpack:///./src/views/Search/index.vue?691a","webpack:///src/views/Search/index.vue","webpack:///./src/views/Search/index.vue?d726","webpack:///./src/views/Search/index.vue"],"names":["getBanner","request","getPersonalized","limit","method","url","getRecommend","getPlayListDetail","id","getLikeIdList","uid","likeMusic","like","getHotComment","type","getNewComment","page","before","offset","getSuberList","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","Count","typename","_l","index","key","class","active","on","$event","search","name","attrs","loading","_e","staticStyle","searchRes","getOneSong","scopedSlots","_u","fn","scope","row","fee","mv","item","blurPicUrl","artist","goArtistInfo","picUrl","goPlayListDetail","coverImgUrl","creator","nickname","avatarUrl","video","goMvDetail","cover","artists","staticRenderFns","props","data","types","isListenId","songMsg","likeIdList","created","init","computed","$store","state","login","profile","userId","methods","songDetail","songName","singer","ar","al","dispatch","commit","$router","push","keyword","isLiked","indexOf","watch","component"],"mappings":"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","file":"js/chunk-15873230.0a04b648.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n/* 获取轮播图 */\r\nexport const getBanner = () => request('/banner')\r\n\r\n/* 获取热门歌单 */\r\nexport const getPersonalized = (limit) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/personalized?limit=${limit}`\r\n  })\r\n}\r\n\r\n/* login 获取个性推荐歌单 */\r\nexport const getRecommend = () => request('/recommend/resource')\r\n\r\n// Date.now()\r\n/* 获取歌单详情 */\r\nexport const getPlayListDetail = (id) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/playlist/detail?id=${id}`\r\n  })\r\n}\r\n\r\n/* 喜欢音乐列表(调用此接口 , 传入用户 id, 可获取已喜欢音乐 id 列表(id 数组)) */\r\nexport const getLikeIdList = (uid) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/likelist?id=${uid}`\r\n  })\r\n}\r\n\r\n/* 喜欢的音乐(调用此接口 , 传入音乐 id, 可喜欢该音乐) */\r\nexport const likeMusic = (id, like) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/like?id=${id}&like=${like}`\r\n  })\r\n}\r\n\r\n/* 热门(精彩)评论,调用此接口 , 传入 type, 资源 id 可获得对应资源热门评论 ( 不需要登录 ) */\r\nexport const getHotComment = (id, type, limit) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/comment/hot?id=${id}&type=${type}&limit=${limit}`\r\n  })\r\n}\r\n\r\n/* 歌单评论, 调用此接口 , 传入音乐 id 和 limit 参数 , 可获得该歌单的所有评论 ( 不需要 登录 ) */\r\nexport const getNewComment = ({ id, limit = 20, page = 0, before = 0 }) => {\r\n  const offset = page * limit\r\n  return request({\r\n    method: 'get',\r\n    url: `/comment/playlist?id=${id}&limit=${limit}&offset=${offset}&before=${before}`\r\n  })\r\n}\r\n\r\n/* 歌单收藏者,调用此接口 , 传入歌单 id 可获取歌单的所有收藏者 */\r\nexport const getSuberList = ({ id, limit = 30, page = 0 }) => {\r\n  const offset = page * limit\r\n  return request({\r\n    method: 'get',\r\n    url: `/playlist/subscribers?id=${id}&limit=${limit}&offset=${offset}`\r\n  })\r\n}","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@9.0.3@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Search view-main\"},[_c('div',{staticClass:\"search-list mtop-20\"},[_c('div',{staticClass:\"font-bold\"},[_vm._v(\"找到 \"+_vm._s(_vm.Count)+\" 个 \"+_vm._s(_vm.typename)+\" 的搜索结果\")]),_c('ul',{staticClass:\"search-menu\"},_vm._l((_vm.types),function(type,index){return _c('li',{key:index,staticClass:\"search-menu-item\",class:index === _vm.active ? 'isActive' : '',on:{\"click\":function($event){return _vm.search(index, type.name, type.type)}}},[_vm._v(\" \"+_vm._s(type.name)+\" \")])}),0),_c('el-skeleton',{attrs:{\"rows\":6,\"animated\":\"\",\"loading\":_vm.loading}},[(!_vm.loading && _vm.type === 1)?[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.searchRes,\"stripe\":\"\"},on:{\"row-click\":_vm.getOneSong}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"favicon\",\"width\":\"30\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{on:{\"click\":function($event){return _vm.likeMusic(scope.row)}}},[_c('div',{staticStyle:{\"width\":\"38px\"}},[(scope.row.isLiked)?_c('i',{staticClass:\"iconfont icon-aixin1\",staticStyle:{\"color\":\"red\"}}):_c('i',{staticClass:\"iconfont icon-aixin\"})])])]}}],null,false,501320547)}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"音乐标题\",\"width\":\"211\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"nameText\",staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.name))]),(scope.row.fee === 1)?_c('div',{staticClass:\"vip-tag\"},[_vm._v(\"VIP\")]):_vm._e(),(scope.row.mv !== 0)?_c('div',{staticClass:\"vip-tag\"},[_vm._v(\"MV\")]):_vm._e()]}}],null,false,3151587853)}),_c('el-table-column',{attrs:{\"prop\":\"ar[0].name\",\"label\":\"歌手\",\"width\":\"80\"}})],1)]:_vm._e(),(!_vm.loading && _vm.type === 10)?[_c('ul',{staticClass:\"info-list\"},_vm._l((_vm.searchRes),function(item){return _c('li',{key:item.id,staticClass:\"info-item\"},[_c('img',{staticClass:\"sub-img mleft-10\",attrs:{\"src\":item.blurPicUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"sub-title font-14 mleft-10\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"sub-item font-12\"},[_c('span',{staticClass:\"mleft-10\",staticStyle:{\"color\":\"rgb(103, 103, 103)\"}},[_vm._v(\" \"+_vm._s(item.artist.name)+\" \")])])])}),0)]:_vm._e(),(!_vm.loading && _vm.type === 100)?[_c('ul',{staticClass:\"info-list\"},_vm._l((_vm.searchRes),function(item){return _c('li',{key:item.id,staticClass:\"info-item\",on:{\"click\":function($event){return _vm.goArtistInfo(item.id)}}},[_c('img',{staticClass:\"sub-img mleft-10\",attrs:{\"src\":item.picUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"sub-title font-14 mleft-10\"},[_vm._v(_vm._s(item.name))])])}),0)]:_vm._e(),(!_vm.loading && _vm.type === 1000)?[_c('ul',{staticClass:\"info-list\"},_vm._l((_vm.searchRes),function(item){return _c('li',{key:item.id,staticClass:\"info-item\",on:{\"click\":function($event){return _vm.goPlayListDetail(item.id)}}},[_c('img',{staticClass:\"sub-img mleft-10\",attrs:{\"src\":item.coverImgUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"sub-title font-14 mleft-10\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"sub-item font-12\"},[_c('span',{staticClass:\"mleft-10\",staticStyle:{\"color\":\"rgb(103, 103, 103)\"}},[_vm._v(\" \"+_vm._s(item.creator.nickname)+\" \")])])])}),0)]:_vm._e(),(!_vm.loading && _vm.type === 1002)?[_c('ul',{staticClass:\"info-list\"},_vm._l((_vm.searchRes),function(item){return _c('li',{key:item.id,staticClass:\"info-item\"},[_c('img',{staticClass:\"sub-img mleft-10\",attrs:{\"src\":item.avatarUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"sub-title font-14 mleft-10\"},[_vm._v(\" \"+_vm._s(item.nickname)+\" \")])])}),0)]:_vm._e(),(!_vm.loading && _vm.type === 1004)?[_c('div',{staticClass:\"vdDetail\"},[_c('ul',_vm._l((_vm.searchRes),function(video,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.goMvDetail(video.id)}}},[_c('div',{staticClass:\"vd\"},[_c('img',{attrs:{\"src\":video.cover,\"alt\":\"\"}}),_c('p',[_vm._v(_vm._s(video.name))]),_c('span',[_vm._v(_vm._s('by' + video.artists[0].name))])])])}),0)])]:_vm._e()],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"Search view-main\">\r\n    <div class=\"search-list mtop-20\">\r\n      <div class=\"font-bold\">找到 {{ Count }} 个 {{ typename }} 的搜索结果</div>\r\n      <!-- tab栏切换 -->\r\n      <ul class=\"search-menu\">\r\n        <li\r\n          class=\"search-menu-item\"\r\n          v-for=\"(type, index) in types\"\r\n          :key=\"index\"\r\n          :class=\"index === active ? 'isActive' : ''\"\r\n          @click=\"search(index, type.name, type.type)\"\r\n        >\r\n          {{ type.name }}\r\n        </li>\r\n      </ul>\r\n      <el-skeleton :rows=\"6\" animated :loading=\"loading\">\r\n        <!-- 单曲 -->\r\n        <template v-if=\"!loading && type === 1\">\r\n          <el-table\r\n            :data=\"searchRes\"\r\n            style=\"width: 100%\"\r\n            stripe\r\n            @row-click=\"getOneSong\"\r\n          >\r\n            <el-table-column type=\"index\" width=\"50\"> </el-table-column>\r\n            <el-table-column prop=\"favicon\" width=\"30\">\r\n              <template slot-scope=\"scope\">\r\n                <span @click=\"likeMusic(scope.row)\">\r\n                  <div style=\"width: 38px\">\r\n                    <i\r\n                      v-if=\"scope.row.isLiked\"\r\n                      style=\"color: red\"\r\n                      class=\"iconfont icon-aixin1\"\r\n                    ></i>\r\n                    <i v-else class=\"iconfont icon-aixin\"></i>\r\n                  </div>\r\n                </span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"音乐标题\" width=\"211\">\r\n              <template slot-scope=\"scope\">\r\n                <span style=\"margin-left: 10px\" class=\"nameText\">{{\r\n                  scope.row.name\r\n                }}</span>\r\n                <div class=\"vip-tag\" v-if=\"scope.row.fee === 1\">VIP</div>\r\n                <div class=\"vip-tag\" v-if=\"scope.row.mv !== 0\">MV</div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"ar[0].name\" label=\"歌手\" width=\"80\">\r\n            </el-table-column>\r\n          </el-table>\r\n        </template>\r\n        <!-- 专辑 -->\r\n        <template v-if=\"!loading && type === 10\">\r\n          <ul class=\"info-list\">\r\n            <li class=\"info-item\" v-for=\"item in searchRes\" :key=\"item.id\">\r\n              <img :src=\"item.blurPicUrl\" class=\"sub-img mleft-10\" alt=\"\" />\r\n              <div class=\"sub-title font-14 mleft-10\">{{ item.name }}</div>\r\n              <div class=\"sub-item font-12\">\r\n                <span class=\"mleft-10\" style=\"color: rgb(103, 103, 103)\">\r\n                  {{ item.artist.name }}\r\n                </span>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n        <!-- 歌手 -->\r\n        <template v-if=\"!loading && type === 100\">\r\n          <ul class=\"info-list\">\r\n            <li\r\n              class=\"info-item\"\r\n              v-for=\"item in searchRes\"\r\n              :key=\"item.id\"\r\n              @click=\"goArtistInfo(item.id)\"\r\n            >\r\n              <img :src=\"item.picUrl\" class=\"sub-img mleft-10\" alt=\"\" />\r\n              <div class=\"sub-title font-14 mleft-10\">{{ item.name }}</div>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n        <!-- 歌单 -->\r\n        <template v-if=\"!loading && type === 1000\">\r\n          <ul class=\"info-list\">\r\n            <li\r\n              class=\"info-item\"\r\n              v-for=\"item in searchRes\"\r\n              :key=\"item.id\"\r\n              @click=\"goPlayListDetail(item.id)\"\r\n            >\r\n              <img :src=\"item.coverImgUrl\" class=\"sub-img mleft-10\" alt=\"\" />\r\n              <div class=\"sub-title font-14 mleft-10\">{{ item.name }}</div>\r\n              <div class=\"sub-item font-12\">\r\n                <span class=\"mleft-10\" style=\"color: rgb(103, 103, 103)\">\r\n                  {{ item.creator.nickname }}\r\n                </span>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n        <!-- 用户 -->\r\n        <template v-if=\"!loading && type === 1002\">\r\n          <ul class=\"info-list\">\r\n            <li class=\"info-item\" v-for=\"item in searchRes\" :key=\"item.id\">\r\n              <img :src=\"item.avatarUrl\" class=\"sub-img mleft-10\" alt=\"\" />\r\n              <div class=\"sub-title font-14 mleft-10\">\r\n                {{ item.nickname }}\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n        <!-- Mv -->\r\n        <template v-if=\"!loading && type === 1004\">\r\n          <div class=\"vdDetail\">\r\n            <ul>\r\n              <li\r\n                v-for=\"(video, index) in searchRes\"\r\n                :key=\"index\"\r\n                @click=\"goMvDetail(video.id)\"\r\n              >\r\n                <!-- 数据在video.data -->\r\n                <div class=\"vd\">\r\n                  <img :src=\"video.cover\" alt=\"\" />\r\n                  <p>{{ video.name }}</p>\r\n                  <span>{{ 'by' + video.artists[0].name }}</span>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </template>\r\n      </el-skeleton>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchKeyword } from \"@/api/Search\"\r\nimport { getLikeIdList, likeMusic } from '@/api/DiscoverMusic/PersonalRecom'\r\nexport default {\r\n  name: \"Search\",\r\n  props: [\"keyword\"],\r\n  data () {\r\n    return {\r\n      searchRes: [],\r\n      Count: 0,\r\n      types: [{ name: \"单曲\", type: 1 }, { name: \"专辑\", type: 10 }, { name: \"歌手\", type: 100 }, { name: \"歌单\", type: 1000 }, { name: \"用户\", type: 1002 }, { name: \"MV\", type: 1004 }],\r\n      active: 0,\r\n      loading: true,\r\n      type: 1,\r\n      typename: \"单曲\",\r\n      isListenId: 0,\r\n      songMsg: {},\r\n      likeIdList: []\r\n    }\r\n  },\r\n  created () {\r\n    this.init()\r\n  },\r\n  computed: {\r\n    uid () {\r\n      return this.$store.state.login.profile.userId\r\n    }\r\n  },\r\n  methods: {\r\n    // 请求数据\r\n    getOneSong (row) {\r\n      if (this.isListenId !== row.id) {\r\n        this.isListenId = row.id\r\n        // 响应式的数据\r\n        const songDetail = {}\r\n        songDetail.songName = row.name\r\n        songDetail.singer = row.ar[0].name\r\n        songDetail.id = row.id\r\n        songDetail.picUrl = row.al.picUrl\r\n        this.songMsg = songDetail\r\n        this.$store.dispatch('songDetail/getoneMusic', songDetail)\r\n        this.$store.commit('songDetail/setplayListTracks', [row])\r\n      }\r\n    },\r\n    async init (keyword = this.keyword, type = 1, offset = 0) {\r\n      this.type = type\r\n      const { data: { result } } = await searchKeyword(keyword, type, offset)\r\n      await this.getLikeIdList(this.uid)\r\n      if (type === 1) {\r\n        this.type = type\r\n        this.Count = result.songCount\r\n        result.songs.forEach((item) => {\r\n          this.$set(item, \"isLiked\", this.isLiked(item.id))\r\n          this.searchRes.push(item)\r\n        })\r\n      } else if (type === 10) {\r\n        this.searchRes = result.albums\r\n        this.Count = result.albumCount\r\n      } else if (type === 100) {\r\n        this.searchRes = result.artists\r\n        this.Count = result.artistCount\r\n      } else if (type === 1000) {\r\n        this.searchRes = result.playlists\r\n        this.Count = result.playlistCount\r\n      } else if (type === 1002) {\r\n        this.searchRes = result.userprofiles\r\n        this.Count = result.userprofileCount\r\n      } else if (type === 1004) {\r\n        this.searchRes = result.mvs\r\n        this.Count = result.mvCount\r\n        console.log(this.searchRes)\r\n      }\r\n      this.loading = false\r\n    },\r\n    goMvDetail (id) {\r\n      this.$router.push(\"/videodetail/mv/\" + id)\r\n    },\r\n    // 改变搜索的type\r\n    search (index, typename, type) {\r\n      this.loading = true\r\n      this.active = index\r\n      this.typename = typename\r\n      this.init(this.keyword, type)\r\n    },\r\n    // 去歌单详情页\r\n    goPlayListDetail (id) {\r\n      this.$router.push(`/playlistdetail/${id}`)\r\n    },\r\n    // 去歌手详情页\r\n    goArtistInfo (id) {\r\n      this.$router.push(`/artistdetail/${id}`)\r\n    },\r\n    async getLikeIdList (uid) {\r\n      const res = await getLikeIdList(uid)\r\n      this.likeIdList = res.data.ids\r\n    },\r\n    // 判断当前是否喜欢\r\n    isLiked (id) {\r\n      return this.likeIdList.indexOf(id) !== -1\r\n    },\r\n    // 点击喜欢\r\n    async likeMusic (item) {\r\n      item.isLiked = !item.isLiked\r\n      await likeMusic(item.id, item.isLiked)\r\n      this.init(this.keyword, this.type)\r\n    }\r\n  },\r\n  watch: {\r\n    '$route' (to, from) {\r\n      this.init(this.keyword, this.type)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" >\r\n.Search {\r\n  .search-menu {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    margin: 20px 0;\r\n    .search-menu-item {\r\n      width: 40px;\r\n      margin-right: 20px;\r\n      line-height: 1;\r\n      text-align: center;\r\n    }\r\n    .search-menu-item.isActive {\r\n      font-size: 16px;\r\n      font-weight: 700;\r\n    }\r\n    .search-menu-item.isActive:after {\r\n      display: block;\r\n      content: '';\r\n      height: 4px;\r\n      width: 90%;\r\n      margin: 0 auto;\r\n      background-color: #ec4141;\r\n      border-radius: 2px;\r\n    }\r\n  }\r\n  .el-table__row {\r\n    span {\r\n      width: 180px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n    div {\r\n      // width: 180px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n  .info-list {\r\n    .info-item {\r\n      display: flex;\r\n      height: 90px;\r\n      align-items: center;\r\n      .sub-img {\r\n        height: 60px;\r\n        width: 60px;\r\n        border-radius: 4px;\r\n      }\r\n      .sub-title {\r\n        min-width: 100px;\r\n        flex: 1;\r\n      }\r\n      .sub-item {\r\n        width: 150px;\r\n        color: #c3c3c4;\r\n      }\r\n    }\r\n    .info-item:nth-child(odd) {\r\n      background-color: #f9f9f9;\r\n    }\r\n  }\r\n  .vdDetail {\r\n    box-sizing: border-box;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n    ul {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      justify-content: space-between;\r\n      li {\r\n        width: 45%;\r\n        margin-bottom: 14px;\r\n        div {\r\n          img {\r\n            width: 100%;\r\n          }\r\n        }\r\n        p {\r\n          margin: 0;\r\n          padding: 0;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n        }\r\n        span {\r\n          color: #e0e0e0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=463d7cc2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}