(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b069beca"],{"510b":function(e,t,n){},d456:function(e,t,n){"use strict";n("510b")},d9c9:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"containner"},[n("h1",[e._v(e._s(e.loginType[e.showindex])+"登录")]),n("div",{staticClass:"type-btn-wrap"},[n("button",{class:0===e.showindex?"active":"",on:{click:function(t){e.showindex=0}}},[e._v(" 手机号 ")]),n("button",{class:1===e.showindex?"active":"",on:{click:function(t){e.createcode(),e.showindex=1}}},[e._v(" 二维码 ")]),n("button",{class:2===e.showindex?"active":"",on:{click:function(t){e.showindex=2}}},[e._v(" 验证码 ")])]),0===e.showindex?n("div",{staticClass:"phoneLogin"},[n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"phone",label:"手机号",placeholder:"手机号",rules:[{required:!0,pattern:e.pattern,message:"请输入正确的手机号"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 登录 ")])],1)],1)],1):e._e(),1===e.showindex?n("div",{staticClass:"codeLogin"},[n("div",{staticClass:"codeqr"},[e._m(0),!1===e.isEffect?n("div",{staticClass:"btn-fresh",on:{click:e.refreshQrcode}},[n("i",{staticClass:"el-icon-refresh-left iconfresh"})]):e._e()]),n("div",{staticClass:"codeImg"},[n("img",{attrs:{src:e.codeImg,alt:""}})]),n("p",{staticClass:"status"},[e._v("状态:"+e._s(e.codeStatus))])]):e._e(),2===e.showindex?n("div",{staticClass:"indentifyLogin"},[n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"phone",label:"手机号",placeholder:"手机号",rules:[{required:!0,pattern:e.pattern,message:"请输入正确的手机号"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"text",name:"identify",label:"验证码",placeholder:"请输入验证码",rules:[{required:!0}]},model:{value:e.identify,callback:function(t){e.identify=t},expression:"identify"}}),n("div",{staticClass:"getidentify"},[n("el-button",{attrs:{type:"primary",plain:"",disabled:e.iscountdown},on:{click:e.sendIdent}},[e._v(e._s(e.msg))])],1),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"button"},on:{click:e.checkIdent}},[e._v(" 登录 ")])],1)],1)],1):e._e()])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" 打开 "),n("a",{attrs:{href:"https://music.163.com/#/download"}},[e._v("网易云音乐手机端")]),e._v(" 扫码登录 ")])}],r=n("799e"),i=(n("e186"),n("665c"),n("d6b0"),n("8bbf")),c=n.n(i),o=n("3089"),u=n("7555");c.a.use(o["Toast"]),c.a.use(o["Form"]),c.a.use(o["Field"]);var d={name:"Login",data:function(){return{username:"",password:"",showindex:0,loginType:["手机号","二维码","验证码"],codeImg:"",codeStatus:"请稍等一会儿",timer:0,status:0,isEffect:!1,identify:"",pattern:/^1(3|4|5|6|7|8|9)\d{9}$/,iscountdown:!1,isSend:!1,msg:"获取验证码",timerIdenify:0,ismsgRight:!1}},methods:{checkIdent:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.identify||e.pattern.test(e.username)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(u["a"])(e.username,e.identify);case 5:n=t.sent,e.ismsgRight=n.data.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),Object(o["Toast"])("验证码错误");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},sendIdent:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.pattern.test(e.username)){t.next=11;break}return e.msg=60,e.iscountdown=!0,e.timerIdenify=setInterval((function(){e.msg--,0===e.msg&&(clearInterval(e.timerIdenify),e.msg="获取验证码",e.iscountdown=!1)}),1e3),t.next=6,Object(u["h"])(e.username);case 6:n=t.sent,e.isSend=n.data.data,e.isSend?Object(o["Toast"])("验证码发送成功"):Object(o["Toast"])(n.data.message),t.next=12;break;case 11:Object(o["Toast"])("请输入正确的手机号");case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})))()},onSubmit:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["e"])(e);case 2:s=n.sent,a=s.data,r=a.code,i=a.msg,200===r?(Object(o["Toast"])("登录成功"),sessionStorage.setItem("isLogin",!0),t.$router.push("/")):(sessionStorage.setItem("isLogin",!1),Object(o["Toast"])(i));case 7:case"end":return n.stop()}}),n)})))()},createcode:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isEffect){t.next=2;break}return t.abrupt("return");case 2:return e.isEffect=!0,n=Date.now(),t.next=6,Object(u["d"])(n);case 6:if(s=t.sent,200===s.data.code){t.next=9;break}return t.abrupt("return");case 9:a=s.data.data.unikey,Object(u["c"])(a,n).then((function(t){Object(u["b"])(a,n).then((function(n){e.codeImg=t.data.data.qrimg,e.codeStatus=n.data.message}))})),clearInterval(e.timer),e.timer=setInterval((function(t){Object(u["b"])(t,Date.now()).then((function(t){e.codeStatus=t.data.message,e.status=t.data.code}))}),1e3,a),1!==e.showindex&&clearInterval(e.timer);case 14:case"end":return t.stop()}}),t)})))()},refreshQrcode:function(){this.codeStatus="请稍等更新中",this.codeImg="",this.createcode()}},watch:{showindex:function(e,t){clearInterval(this.timer),1!==e?(this.codeImg="",this.isEffect=!1):this.refreshQrcode()},status:function(e){800===e?(this.isEffect=!1,clearInterval(this.timer)):803===e&&(this.isEffect=!1,clearInterval(this.timer),Object(o["Toast"])("登录成功"),sessionStorage.setItem("isLogin",!0),this.$router.push("/"))},ismsgRight:function(e){e?(Object(o["Toast"])("登录成功"),sessionStorage.setItem("isLogin",!0),this.$router.push("/")):(sessionStorage.setItem("isLogin",!1),Object(o["Toast"])("登录失败"))}}},l=d,m=(n("d456"),n("cba8")),f=Object(m["a"])(l,s,a,!1,null,"f0ac98d6",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-b069beca.30ec6a5b.js.map