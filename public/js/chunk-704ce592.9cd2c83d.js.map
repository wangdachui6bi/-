{"version":3,"sources":["webpack:///./src/api/DiscoverMusic/PersonalRecom.js","webpack:///./src/views/DiscoverMusic/PersonalRecom/index.vue?3232","webpack:///src/views/DiscoverMusic/PersonalRecom/index.vue","webpack:///./src/views/DiscoverMusic/PersonalRecom/index.vue?0d33","webpack:///./src/views/DiscoverMusic/PersonalRecom/index.vue","webpack:///./src/views/DiscoverMusic/PersonalRecom/index.vue?8aa9"],"names":["getBanner","request","getPersonalized","limit","method","url","getRecommend","getPlayListDetail","id","getLikeIdList","uid","likeMusic","like","getHotComment","type","getNewComment","page","before","offset","getSuberList","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","loading","_l","item","key","imageUrl","isLogin","on","$event","$router","push","_v","picUrl","getTo","_s","name","staticRenderFns","data","imgList","recSongList","recommendList","sessionStorage","getItem","created","getImgList","getRecSongList","methods","component"],"mappings":"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","file":"js/chunk-704ce592.9cd2c83d.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n/* 获取轮播图 */\r\nexport const getBanner = () => request('/banner')\r\n\r\n/* 获取热门歌单 */\r\nexport const getPersonalized = (limit) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/personalized?limit=${limit}`\r\n  })\r\n}\r\n\r\n/* login 获取个性推荐歌单 */\r\nexport const getRecommend = () => request('/recommend/resource')\r\n\r\n// Date.now()\r\n/* 获取歌单详情 */\r\nexport const getPlayListDetail = (id) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/playlist/detail?id=${id}`\r\n  })\r\n}\r\n\r\n/* 喜欢音乐列表(调用此接口 , 传入用户 id, 可获取已喜欢音乐 id 列表(id 数组)) */\r\nexport const getLikeIdList = (uid) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/likelist?id=${uid}`\r\n  })\r\n}\r\n\r\n/* 喜欢的音乐(调用此接口 , 传入音乐 id, 可喜欢该音乐) */\r\nexport const likeMusic = (id, like) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/like?id=${id}&like=${like}`\r\n  })\r\n}\r\n\r\n/* 热门(精彩)评论,调用此接口 , 传入 type, 资源 id 可获得对应资源热门评论 ( 不需要登录 ) */\r\nexport const getHotComment = (id, type, limit) => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/comment/hot?id=${id}&type=${type}&limit=${limit}`\r\n  })\r\n}\r\n\r\n/* 歌单评论, 调用此接口 , 传入音乐 id 和 limit 参数 , 可获得该歌单的所有评论 ( 不需要 登录 ) */\r\nexport const getNewComment = ({ id, limit = 20, page = 0, before = 0 }) => {\r\n  const offset = page * limit\r\n  return request({\r\n    method: 'get',\r\n    url: `/comment/playlist?id=${id}&limit=${limit}&offset=${offset}&before=${before}`\r\n  })\r\n}\r\n\r\n/* 歌单收藏者,调用此接口 , 传入歌单 id 可获取歌单的所有收藏者 */\r\nexport const getSuberList = ({ id, limit = 30, page = 0 }) => {\r\n  const offset = page * limit\r\n  return request({\r\n    method: 'get',\r\n    url: `/playlist/subscribers?id=${id}&limit=${limit}&offset=${offset}`\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-recom view-main\"},[_c('el-skeleton',{attrs:{\"rows\":6,\"animated\":\"\",\"loading\":_vm.loading}},[_c('div',{staticClass:\"swiper-wrapper\"},[_c('el-carousel',{attrs:{\"interval\":4000,\"type\":\"card\",\"height\":\"80px\"}},_vm._l((_vm.imgList),function(item){return _c('el-carousel-item',{key:item.imageUrl},[_c('img',{staticClass:\"swiper-img\",attrs:{\"src\":item.imageUrl}})])}),1)],1),(!_vm.isLogin)?_c('div',{staticClass:\"play-list\"},[_c('h2',{on:{\"click\":function($event){return _vm.$router.push('playlist')}}},[_vm._v(\" 热门推荐 \"),_c('i',{staticClass:\"iconfont icon-youjiantou1\"})]),_c('div',{staticClass:\"imglist\"},[_c('ul',{staticClass:\"img-list-ul\"},_vm._l((_vm.recSongList),function(item){return _c('li',{key:item.id,staticClass:\"img-item-li\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"img img-radius-8 img-border\",attrs:{\"src\":item.picUrl,\"alt\":\"\"},on:{\"click\":function($event){return _vm.getTo('playlistdetail', item.id)}}}),_c('div',{staticClass:\"play-btn\"},[_c('i',{staticClass:\"el-icon-caret-right\"})])]),_c('div',{staticClass:\"text-hidden\"},[_vm._v(_vm._s(item.name))])])}),0)])]):_c('div',{staticClass:\"play-list\"},[_c('h2',{on:{\"click\":function($event){return _vm.$router.push('playlist')}}},[_vm._v(\" 推荐歌单 \"),_c('i',{staticClass:\"iconfont icon-youjiantou1\"})]),_c('div',{staticClass:\"imglist\"},[_c('ul',{staticClass:\"img-list-ul\"},_vm._l((_vm.recommendList),function(item){return _c('li',{key:item.id,staticClass:\"img-item-li\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"img img-radius-8 img-border\",attrs:{\"src\":item.picUrl,\"alt\":\"\"},on:{\"click\":function($event){return _vm.getTo('playlistdetail', item.id)}}}),_c('div',{staticClass:\"play-btn\"},[_c('i',{staticClass:\"el-icon-caret-right\"})])]),_c('div',{staticClass:\"text-hidden\"},[_vm._v(_vm._s(item.name))])])}),0)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"personal-recom view-main\">\r\n    <el-skeleton :rows=\"6\" animated :loading=\"loading\">\r\n      <div class=\"swiper-wrapper\">\r\n        <el-carousel :interval=\"4000\" type=\"card\" height=\"80px\">\r\n          <el-carousel-item v-for=\"item in imgList\" :key=\"item.imageUrl\">\r\n            <img class=\"swiper-img\" :src=\"item.imageUrl\" />\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </div>\r\n      <!-- 未登录状态下的热门推荐 -->\r\n      <div class=\"play-list\" v-if=\"!isLogin\">\r\n        <h2 @click=\"$router.push('playlist')\">\r\n          热门推荐 <i class=\"iconfont icon-youjiantou1\"></i>\r\n        </h2>\r\n        <div class=\"imglist\">\r\n          <ul class=\"img-list-ul\">\r\n            <li v-for=\"item in recSongList\" :key=\"item.id\" class=\"img-item-li\">\r\n              <div class=\"img-wrap\">\r\n                <img\r\n                  :src=\"item.picUrl\"\r\n                  alt=\"\"\r\n                  class=\"img img-radius-8 img-border\"\r\n                  @click=\"getTo('playlistdetail', item.id)\"\r\n                />\r\n                <div class=\"play-btn\">\r\n                  <i class=\"el-icon-caret-right\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"text-hidden\">{{ item.name }}</div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <!-- 登录状态下的推荐歌单 -->\r\n      <div class=\"play-list\" v-else>\r\n        <h2 @click=\"$router.push('playlist')\">\r\n          推荐歌单 <i class=\"iconfont icon-youjiantou1\"></i>\r\n        </h2>\r\n        <div class=\"imglist\">\r\n          <ul class=\"img-list-ul\">\r\n            <li\r\n              v-for=\"item in recommendList\"\r\n              :key=\"item.id\"\r\n              class=\"img-item-li\"\r\n            >\r\n              <div class=\"img-wrap\">\r\n                <img\r\n                  :src=\"item.picUrl\"\r\n                  alt=\"\"\r\n                  class=\"img img-radius-8 img-border\"\r\n                  @click=\"getTo('playlistdetail', item.id)\"\r\n                />\r\n                <div class=\"play-btn\">\r\n                  <i class=\"el-icon-caret-right\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"text-hidden\">{{ item.name }}</div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </el-skeleton>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getBanner, getPersonalized, getRecommend } from '@/api/DiscoverMusic/PersonalRecom'\r\n\r\nexport default {\r\n  name: \"PersonalRecom\",\r\n  data () {\r\n    return {\r\n      imgList: [],\r\n      recSongList: [],\r\n      recommendList: [],\r\n      loading: true,\r\n      isLogin: sessionStorage.getItem(\"isLogin\")\r\n    }\r\n  },\r\n  created () {\r\n    // console.log(sessionStorage.getItem('isLogin'))\r\n    this.getImgList()\r\n    if (this.isLogin) {\r\n      this.getRecommend()\r\n    } else {\r\n      this.getRecSongList(10)\r\n    }\r\n  },\r\n  methods: {\r\n    async getImgList () {\r\n      const res = await getBanner()\r\n      // console.log(res)\r\n      this.imgList = res.data.banners\r\n    },\r\n    // 获取热门推荐歌单 未登录时\r\n    async getRecSongList (limit) {\r\n      // if (this.isLogin) return\r\n      const res = await getPersonalized(limit)\r\n      // console.log(res, limit)\r\n      // if (res.code !== 200) return\r\n      this.recSongList = res.data.result\r\n\r\n      this.loading = false\r\n    },\r\n    async getRecommend () {\r\n      // if (this.isLogin) return\r\n      const res = await getRecommend()\r\n      // if (res.code !== 200) return\r\n      // console.log(res)\r\n      this.recommendList = res.data.recommend\r\n      this.loading = false\r\n    },\r\n    getTo (url, id) {\r\n      this.$router.push(url + '/' + id)\r\n      // console.log(id)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.swiper-img {\r\n  border-radius: 8px;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\nh2 {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  margin-left: 12px;\r\n  color: #2c3e50;\r\n  i {\r\n    color: #2c3e50;\r\n  }\r\n}\r\n.img-list-ul {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  .img-item-li {\r\n    margin-bottom: 30px;\r\n    width: 30%;\r\n    margin-right: 1%;\r\n    margin-left: 2%;\r\n  }\r\n  &:nth-child(3n) {\r\n    margin-right: 0;\r\n  }\r\n}\r\n\r\n//图片区域\r\n.img-wrap {\r\n  position: relative;\r\n  .play-btn {\r\n    position: absolute;\r\n    width: 24px;\r\n    height: 24px;\r\n    right: 5px;\r\n    bottom: 8px;\r\n    color: #ec4141;\r\n    background-color: #fbf7f6;\r\n    border-radius: 50%;\r\n    opacity: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    i {\r\n      font-size: 20px;\r\n    }\r\n  }\r\n  .img-border {\r\n    box-sizing: border-box;\r\n    border: 1px solid #dddddd;\r\n  }\r\n  .img-radius-8 {\r\n    border-radius: 8px;\r\n  }\r\n  .img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n}\r\n.text-hidden {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2da5d7d2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2da5d7d2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2da5d7d2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@9.0.3@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2da5d7d2&lang=scss&scoped=true&\""],"sourceRoot":""}